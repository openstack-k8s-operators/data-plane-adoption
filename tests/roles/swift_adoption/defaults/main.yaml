---
# rhoso namespace
swift_patch: |
  spec:
    swift:
      enabled: true
      template:
        memcachedInstance: memcached
        swiftRing:
          ringReplicas: 1
        swiftStorage:
          replicas: 0
          networkAttachments:
          - storage
          - storagemgmt
          storageClass: {{ storage_class_name }}
          storageRequest: 10Gi
        swiftProxy:
          secret: osp-secret
          replicas: 1
          passwordSelectors:
            service: SwiftPassword
          serviceUser: swift
          override:
            service:
              internal:
                metadata:
                  annotations:
                    metallb.universe.tf/address-pool: internalapi
                    metallb.universe.tf/allow-shared-ip: internalapi
                    {% if ipv6_enabled | default(false) -%}
                    metallb.universe.tf/loadBalancerIPs: {{ internalapi_prefix_ipv6 | default('2620:cf:cf:bbbb') }}::50
                    {%- else -%}
                    metallb.universe.tf/loadBalancerIPs: {{ internalapi_prefix | default('172.17.0') }}.80
                    {%- endif %}

                spec:
                  type: LoadBalancer
          networkAttachments:
          - storage
          - storagemgmt
